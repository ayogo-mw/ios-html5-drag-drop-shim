/*! drag-drop-webkit-mobile 0.2.4 | Copyright (c) 2014 Tim Ruffles | BSD 2 License */!function(a,b){function c(){var a=b.createElement("div"),c="draggable"in a,d="ondragstart"in a&&"ondrop"in a,f=!(c||d)||/iPad|iPhone|iPod/.test(navigator.userAgent);k((f?"":"not ")+"patching html5 drag drop"),b.addEventListener("touchstart",e)}function d(a,b){this.touchPositions={},this.dragData={},this.el=b||a.target,a.preventDefault(),k("dragstart"),this.dispatchDragStart(),this.elTranslation=g(this.el),this.listen()}function e(a){var c=a.target;do c.hasAttribute("draggable")&&(a.preventDefault(),new d(a,c));while((c=c.parentNode)&&c!==b.body)}function f(c,d){var e=c.parentElement,f=c.nextSibling;e.removeChild(c);var g=d.changedTouches[0],h=b.elementFromPoint(g.pageX-a.pageXOffset,g.pageY-a.pageYOffset);return f?e.insertBefore(c,f):e.appendChild(c),h}function g(a){var b=a.style["-webkit-transform"],c=0,d=0,e=/translate\(\s*(\d+)[^,]*,\D*(\d+)/.exec(b);return e&&(c=parseInt(e[1],10),d=parseInt(e[2],10)),{x:c,y:d}}function h(a,b,c){var d=a.style["-webkit-transform"].replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,"");a.style["-webkit-transform"]=d+" translate("+b+"px,"+c+"px)"}function i(a,b,c,d){return d&&(c=c.bind(d)),a.addEventListener(b,c),{off:function(){return a.removeEventListener(b,c)}}}function j(a,b,c,d){function e(d){return c(d),a.removeEventListener(b,e)}return d&&(c=c.bind(d)),a.addEventListener(b,e)}function k(a){console.log(a)}function l(a){return 0===a.length?0:a.reduce(function(a,b){return b+a},0)/a.length}k=function(){},c(),d.prototype={listen:function(){function a(a){this.dragend(a,a.target),c()}function c(){return k("cleanup"),this.touchPositions={},this.el=this.dragData=null,[d,e,f].forEach(function(a){return a.off()})}var d=i(b,"touchmove",this.move,this),e=i(b,"touchend",a,this),f=i(b,"touchcancel",c,this)},move:function(a){var b={x:[],y:[]};[].forEach.call(a.changedTouches,function(a,c){var d=this.touchPositions[c];d?(b.x.push(a.pageX-d.x),b.y.push(a.pageY-d.y)):this.touchPositions[c]=d={},d.x=a.pageX,d.y=a.pageY}.bind(this)),this.elTranslation.x+=l(b.x),this.elTranslation.y+=l(b.y),h(this.el,this.elTranslation.x,this.elTranslation.y)},dragend:function(a){k("dragend");var c=f(this.el,a);c?(k("found drop target "+c.tagName),this.dispatchDrop(c)):(k("no drop target, scheduling snapBack"),j(b,"dragend",this.snapBack,this));var d=b.createEvent("Event");d.initEvent("dragend",!0,!0),this.el.dispatchEvent(d)},dispatchDrop:function(a){var c=!0,d=b.createEvent("Event");d.initEvent("drop",!0,!0),d.dataTransfer={getData:function(a){return this.dragData[a]}.bind(this)},d.preventDefault=function(){c=!1,h(this.el,0,0)}.bind(this),j(b,"drop",function(){k("drop event not canceled"),c&&this.snapBack()},this),a.dispatchEvent(d)},snapBack:function(){j(this.el,"webkitTransitionEnd",function(){this.el.style["-webkit-transition"]="none"},this),setTimeout(function(){this.el.style["-webkit-transition"]="all 0.2s",h(this.el,0,0)}.bind(this))},dispatchDragStart:function(){var a=b.createEvent("Event");a.initEvent("dragstart",!0,!0),a.dataTransfer={setData:function(a,b){this.dragData[a]=b}.bind(this),dropEffect:"move"},this.el.dispatchEvent(a)}},void 0===Function.prototype.bind&&(Function.prototype.bind=function(b){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - binding an object that is not callable");var c=Array.prototype.slice.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e?this:b||a,c.concat(Array.prototype.slice.call(arguments)))};return e.prototype=this.prototype,f.prototype=new e,f})}(window,document);