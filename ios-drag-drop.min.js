/*! drag-drop-webkit-mobile 0.2.4 | Copyright (c) 2014 Tim Ruffles | BSD 2 License */!function(a,b){"use strict";function c(a,b){this.touchPositions={},this.dragData={},this.el=b||a.target,a.preventDefault(),this.dispatchDragEvent("dragstart",this.el),this.elTranslation=f(this.el),this.listen()}function d(a){var d=a.target;do"true"===d.getAttribute("draggable")&&(a.preventDefault(),new c(a,d));while((d=d.parentNode)&&d!==b.body)}function e(c,d){var e=c.parentElement,f=c.nextSibling;e.removeChild(c);var g=d.changedTouches[0],h=b.elementFromPoint(g.pageX-a.pageXOffset,g.pageY-a.pageYOffset);return f?e.insertBefore(c,f):e.appendChild(c),h}function f(a){var b=a.style["-webkit-transform"],c=0,d=0,e=/translate\(\s*(\d+)[^,]*,\D*(\d+)/.exec(b);return e&&(c=parseInt(e[1],10),d=parseInt(e[2],10)),{x:c,y:d}}function g(a,b,c){var d=a.style["-webkit-transform"].replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,"");a.style["-webkit-transform"]=d+" translate("+b+"px,"+c+"px)"}function h(a,b,c,d){return d&&(c=c.bind(d)),a.addEventListener(b,c),{off:function(){return a.removeEventListener(b,c)}}}function i(a,b,c,d){function e(d){return c(d),a.removeEventListener(b,e)}return d&&(c=c.bind(d)),a.addEventListener(b,e)}function j(a){return 0===a.length?0:a.reduce(function(a,b){return b+a},0)/a.length}"ontouchstart"in a&&(/CrOS.*Chrome/.exec(navigator.userAgent)||(b.addEventListener("touchstart",d),c.prototype={listen:function(){function a(a){this.dragend(a),c.bind(this)()}function c(){return this.touchPositions={},this.dragData=null,[d,e,f].forEach(function(a){return a.off()})}var d=h(b,"touchmove",this.move,this),e=h(b,"touchend",a,this),f=h(b,"touchcancel",c,this)},move:function(a){var b={x:[],y:[]};[].forEach.call(a.changedTouches,function(a,c){var d=this.touchPositions[c];d?(b.x.push(a.pageX-d.x),b.y.push(a.pageY-d.y)):this.touchPositions[c]=d={},d.x=a.pageX,d.y=a.pageY}.bind(this)),this.elTranslation.x+=j(b.x),this.elTranslation.y+=j(b.y),g(this.el,this.elTranslation.x,this.elTranslation.y);var c=e(this.el,a);null!==c&&(c!==this.prevTarget&&(void 0!==this.prevTarget&&this.dispatchDragEvent("dragleave",this.prevTarget),this.dispatchDragEvent("dragenter",c),this.prevTarget=c),this.dispatchDragEvent("dragover",c))},dragend:function(a){var c=e(this.el,a);c?this.dispatchDrop(c):i(b,"dragend",this.snapBack,this);var d=b.createEvent("Event");d.initEvent("dragend",!0,!0),this.el.dispatchEvent(d)},dispatchDrop:function(a){var c=!0,d=b.createEvent("Event");d.initEvent("drop",!0,!0),d.dataTransfer={getData:function(a){return this.dragData[a]}.bind(this)},d.preventDefault=function(){c=!1,g(this.el,0,0)}.bind(this),i(b,"drop",function(){c&&this.snapBack()},this),a.dispatchEvent(d)},snapBack:function(){i(this.el,"webkitTransitionEnd",function(){this.el.style["-webkit-transition"]="none"},this),setTimeout(function(){this.el.style["-webkit-transition"]="all 0.2s",g(this.el,0,0)}.bind(this))},dispatchDragEvent:function(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.dataTransfer={setData:function(a,b){this.dragData[a]=b}.bind(this),dropEffect:"move"},c.dispatchEvent(d)}},void 0===Function.prototype.bind&&(Function.prototype.bind=function(b){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - binding an object that is not callable");var c=Array.prototype.slice.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e?this:b||a,c.concat(Array.prototype.slice.call(arguments)))};return e.prototype=this.prototype,f.prototype=new e,f})))}(window,document);